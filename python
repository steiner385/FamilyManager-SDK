# Security Policy

## Supported Versions

| Version | Supported          |
| ------- | ------------------ |
| 2.x.x   | :white_check_mark: |
| 1.x.x   | :x:                |

## Reporting a Vulnerability

FamilyManager takes security seriously. We appreciate your efforts to responsibly disclose your findings.

### Process
1. **DO NOT** create public GitHub issues for security vulnerabilities
2. Submit vulnerability reports to security@familymanager.com
3. Include detailed steps to reproduce the issue
4. We will acknowledge receipt within 24 hours
5. We aim to validate and respond to reports within 72 hours

### What to Include
- Description of the vulnerability
- Steps to reproduce
- Potential impact
- Suggested fix (if available)

### Our Commitment
- We will investigate all legitimate reports
- We will keep you informed of our progress
- We will credit researchers who report valid issues (if desired)

### Safe Harbor
We consider security research conducted under this policy to constitute "authorized" conduct and will not initiate legal action against researchers for security research conducted in accordance with this policy.

### Contact
- Email: security@familymanager.com
- Emergency: +1-XXX-XXX-XXXX
- PGP Key: [security-pgp.familymanager.com](https://security-pgp.familymanager.com)
#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Run git-secrets to check for potential secrets/credentials
git secrets --scan

# Run detect-secrets
detect-secrets scan

# Run Talisman
talisman --scan

# Run additional security checks
npm run security-check
name: Security Scan

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]
  schedule:
    - cron: '0 0 * * *'

jobs:
  security-scan:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      - name: SAST Scan
        uses: github/codeql-action/analyze@v2
        with:
          languages: javascript, typescript

      - name: Dependency Scan
        run: |
          npm audit
          npm run snyk-test

      - name: Secret Scan
        uses: gitleaks/gitleaks-action@v2
        with:
          config-path: .gitleaks.toml

      - name: Security Headers Check
        run: npm run check-headers

      - name: Report Security Issues
        if: failure()
        uses: actions/github-script@v6
        with:
          script: |
            const issue = {
              title: 'Security Scan Failed',
              body: 'Security scan detected potential issues. Please review logs.',
              labels: ['security', 'high-priority']
            }
            github.rest.issues.create({
              ...context.repo,
              ...issue
            })
module.exports = {
  headers: {
    'Content-Security-Policy': [
      "default-src 'self'",
      "script-src 'self' 'unsafe-inline' 'unsafe-eval'",
      "style-src 'self' 'unsafe-inline'",
      "img-src 'self' data: https:",
      "connect-src 'self' https://api.familymanager.com",
    ].join('; '),
    'Strict-Transport-Security': 'max-age=31536000; includeSubDomains',
    'X-Frame-Options': 'DENY',
    'X-Content-Type-Options': 'nosniff',
    'X-XSS-Protection': '1; mode=block',
    'Referrer-Policy': 'strict-origin-when-cross-origin',
    'Permissions-Policy': 'camera=(), microphone=(), geolocation=()',
  }
};
